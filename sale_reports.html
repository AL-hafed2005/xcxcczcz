<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

  <h2>ğŸ“Š ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h2>
  <div id="reportsContainer"></div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCnyLJmfaJZAW8c7_LaZo8G63UPWE3M6bs",
      authDomain: "kasher-e52a0.firebaseapp.com",
      projectId: "kasher-e52a0",
      storageBucket: "kasher-e52a0.firebasestorage.app",
      messagingSenderId: "424841509626",
      appId: "1:424841509626:web:9578c33123e2fd6ff0e743",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function loadReports() {
      db.collection("salesReports").orderBy("timestamp", "desc").get()
        .then(snapshot => {
          const container = document.getElementById("reportsContainer");
          container.innerHTML = '';

          snapshot.forEach(doc => {
            const report = doc.data();
            const date = report.timestamp?.toDate().toLocaleString() || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            let html = `<div class="report-box">
              <p><strong>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${date}</p>
              <p><strong>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù:</strong> ${report.employee || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</p>

              <ul>`;
            report.items.forEach(item => {
              html += `<li>${item.name} - ${item.price} Ã— ${item.quantity}</li>`;
            });
            html += `</ul>
              <p><strong>ğŸ’° Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</strong> ${report.total.toFixed(2)} Ø¯ÙŠÙ†Ø§Ø±</p>
              <hr />
            </div>`;
            container.innerHTML += html;
          });
        })
        .catch(err => {
          console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±:", err);
        });
    }

    window.onload = loadReports;
  </script>

  <style>
   
    .report-box {
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      background-color: #1b0943;
    }
  </style><!-- Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†Ø³Ø¯Ù„Ø© Ù„Ù„ØªÙ†Ù‚Ù„ -->
<div class="dropdown-sidebar">
  <button class="dropdown-toggle" onclick="toggleSidebar()">â˜° Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
  <div id="sidebarMenu" class="dropdown-menu">
    <a href="about.html" class="btn " style="margin-bottom: 10px;">
      <img src="https://img.icons8.com/ios-filled/32/000000/shopping-cart.png" alt="Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ¹"> Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ¹
    </a>
    <a href="sale_reports.html" class="btn active" style="margin-bottom: 10px;">
      <img src="https://img.icons8.com/ios-filled/32/000000/sales-performance.png" alt="ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"> ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
    </a>
    <a href="users.html" class="btn" style="margin-bottom: 10px;">
      <img src="https://img.icons8.com/ios-filled/32/000000/add-user-group-man-man.png" alt="Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
    </a>
    <a href="itemad.html" class="btn" style="margin-bottom: 10px;">
      <img src="https://img.icons8.com/ios-filled/32/000000/product.png" alt="Ø§Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"> Ø§Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    </a>
    <a href="main.html" class="btn" style="margin-bottom: 10px;">
      <img src="https://img.icons8.com/ios-filled/32/000000/marker.png" alt="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"> Ø§Ù„ÙØ±ÙˆØ¹
    </a>
    <a href="contact.html" class="btn" style="margin-bottom: 10px;">
      <img src="https://img.icons8.com/ios-filled/32/000000/phone.png" alt="ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§"> ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§
    </a>
    <a href="index.html" class="btn" style="background:#d32f2f;color:#fff;">
      <img src="https://img.icons8.com/ios-filled/32/ffffff/logout-rounded-left.png" alt="ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"> ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
    </a>
  </div>
</div>
<script>
function toggleSidebar() {
  var menu = document.getElementById('sidebarMenu');
  menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
}
// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
window.onclick = function(event) {
  var menu = document.getElementById('sidebarMenu');
  var btn = document.querySelector('.dropdown-toggle');
  if (menu && event.target !== btn && !btn.contains(event.target)) {
    menu.style.display = 'none';
  }
}
</script>
</body>
</html>
